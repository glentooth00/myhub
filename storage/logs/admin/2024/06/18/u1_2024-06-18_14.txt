2024-06-18 14:24:10 - *** USER LOG ***
2024-06-18 14:24:10 - U1, Sysadmin


2024-06-18 14:24:10 - *** PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:10 - GET /admin/dashboard
[Request]:	2024-06-18 14:24:10 - File: C:\laragon\www\myhub\pages\admin\dashboard\dashboard.php
[Request]:	2024-06-18 14:24:10 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:10 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:10 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:10 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:10 - db::query()
[Debug]:	2024-06-18 14:24:10 - db::buildQuery()
[Debug]:	2024-06-18 14:24:10 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:12 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:12 - AJAX GET /admin/tccs?back=dashboard
[Request]:	2024-06-18 14:24:12 - File: C:\laragon\www\myhub\pages\admin\tccs\tccs.php
[Request]:	2024-06-18 14:24:12 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:12 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:12 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:12 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:12 - db::query()
[Debug]:	2024-06-18 14:24:12 - db::buildQuery()
[Debug]:	2024-06-18 14:24:12 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:12 - db::query()
[Debug]:	2024-06-18 14:24:12 - db::buildQuery()
[Debug]:	2024-06-18 14:24:12 - db::query(), Array
(
    [0] => SELECT * FROM user_settings WHERE user_id = ? ORDER BY setting_key
    [1] => [1]
)

[Debug]:	2024-06-18 14:24:12 - db::query()
[Debug]:	2024-06-18 14:24:12 - db::buildQuery()
[Debug]:	2024-06-18 14:24:12 - db::query(), Array
(
    [0] => SELECT u.id, u.user_id, u.username, u.first_name, u.last_name, u.email, r.name as role, r.home FROM users as u LEFT JOIN sys_roles as r on (u.role_id = r.id) WHERE r.name = ? ORDER BY u.first_name, u.last_name
    [1] => ["accountant"]
)

[Debug]:	2024-06-18 14:24:12 - users: Array
(
    [0] => stdClass Object
        (
            [id] => 2
            [user_id] => _acntnt_
            [username] => Accountant
            [first_name] => CH
            [last_name] => System
            [email] => accountant@currencyhub.co.za
            [role] => accountant
            [home] => accountant/dashboard
        )

)

[Debug]:	2024-06-18 14:24:12 - db::query()
[Debug]:	2024-06-18 14:24:12 - db::buildQuery()
[Debug]:	2024-06-18 14:24:12 - db::query(), Array
(
    [0] => SELECT * FROM view_tccs WHERE deleted_at IS ? AND created_at >= ? ORDER BY created_at DESC
    [1] => [null,"2024-06-17"]
)



2024-06-18 14:24:15 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:15 - AJAX GET /admin/tccs?view=edit&id=new
[Request]:	2024-06-18 14:24:15 - File: C:\laragon\www\myhub\pages\admin\tccs\tccs.php
[Request]:	2024-06-18 14:24:15 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:15 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:15 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:15 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:15 - db::query()
[Debug]:	2024-06-18 14:24:15 - db::buildQuery()
[Debug]:	2024-06-18 14:24:15 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:15 - getTccById(), id = new
[Debug]:	2024-06-18 14:24:15 - Editing tcc: stdClass Object
(
    [id] => 
    [tcc_id] => 21bd1bbf-e82c-45da-8365-578730bcf200
    [client_id] => 
    [status] => Pending
    [application_date] => 
    [date] => 
    [amount_cleared] => 
    [amount_reserved] => 
    [rollover] => 
    [amount_cleared_net] => 
    [amount_used] => 
    [amount_remaining] => 
    [amount_available] => 
    [expired] => 
    [tcc_pin] => 
    [notes] => 
    [allocated_trades] => 
    [tax_case_no] => 
    [tax_cert_pdf] => 
    [created_at] => 
    [created_by] => 
    [updated_at] => 
    [updated_by] => 
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 
    [sync_by] => 
    [sync_from] => 
    [sync_type] => 
)

[Debug]:	2024-06-18 14:24:15 - db::query()
[Debug]:	2024-06-18 14:24:15 - db::buildQuery()
[Debug]:	2024-06-18 14:24:15 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE deleted_at IS ? ORDER BY name asc
    [1] => [null]
)



2024-06-18 14:24:44 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:44 - AJAX GET /admin/tccs?back=dashboard
[Request]:	2024-06-18 14:24:44 - File: C:\laragon\www\myhub\pages\admin\tccs\tccs.php
[Request]:	2024-06-18 14:24:44 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:44 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:44 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:44 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:44 - db::query()
[Debug]:	2024-06-18 14:24:44 - db::buildQuery()
[Debug]:	2024-06-18 14:24:44 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:44 - db::query()
[Debug]:	2024-06-18 14:24:44 - db::buildQuery()
[Debug]:	2024-06-18 14:24:44 - db::query(), Array
(
    [0] => SELECT * FROM user_settings WHERE user_id = ? ORDER BY setting_key
    [1] => [1]
)

[Debug]:	2024-06-18 14:24:44 - db::query()
[Debug]:	2024-06-18 14:24:44 - db::buildQuery()
[Debug]:	2024-06-18 14:24:44 - db::query(), Array
(
    [0] => SELECT u.id, u.user_id, u.username, u.first_name, u.last_name, u.email, r.name as role, r.home FROM users as u LEFT JOIN sys_roles as r on (u.role_id = r.id) WHERE r.name = ? ORDER BY u.first_name, u.last_name
    [1] => ["accountant"]
)

[Debug]:	2024-06-18 14:24:44 - users: Array
(
    [0] => stdClass Object
        (
            [id] => 2
            [user_id] => _acntnt_
            [username] => Accountant
            [first_name] => CH
            [last_name] => System
            [email] => accountant@currencyhub.co.za
            [role] => accountant
            [home] => accountant/dashboard
        )

)

[Debug]:	2024-06-18 14:24:44 - db::query()
[Debug]:	2024-06-18 14:24:44 - db::buildQuery()
[Debug]:	2024-06-18 14:24:44 - db::query(), Array
(
    [0] => SELECT * FROM view_tccs WHERE deleted_at IS ? AND created_at >= ? ORDER BY created_at DESC
    [1] => [null,"2024-06-17"]
)



2024-06-18 14:24:46 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:46 - AJAX GET /admin/dashboard
[Request]:	2024-06-18 14:24:46 - File: C:\laragon\www\myhub\pages\admin\dashboard\dashboard.php
[Request]:	2024-06-18 14:24:46 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:46 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:46 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:46 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:46 - db::query()
[Debug]:	2024-06-18 14:24:46 - db::buildQuery()
[Debug]:	2024-06-18 14:24:46 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:47 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:47 - AJAX GET /admin/settings?back=dashboard
[Request]:	2024-06-18 14:24:47 - File: C:\laragon\www\myhub\pages\admin\settings\settings.php
[Request]:	2024-06-18 14:24:47 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:47 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:47 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:47 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:47 - db::query()
[Debug]:	2024-06-18 14:24:47 - db::buildQuery()
[Debug]:	2024-06-18 14:24:47 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:49 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:49 - AJAX GET /admin/settings?view=cities&back=settings
[Request]:	2024-06-18 14:24:49 - File: C:\laragon\www\myhub\pages\admin\settings\settings.php
[Request]:	2024-06-18 14:24:49 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:49 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:49 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:49 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:49 - db::query()
[Debug]:	2024-06-18 14:24:49 - db::buildQuery()
[Debug]:	2024-06-18 14:24:49 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:49 - db::query()
[Debug]:	2024-06-18 14:24:49 - db::buildQuery()
[Debug]:	2024-06-18 14:24:49 - db::query(), Array
(
    [0] => SELECT * FROM loc_cities ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:49 - attrsStr = 
[Debug]:	2024-06-18 14:24:49 - inclFileRef = _partials/cities.css
[Debug]:	2024-06-18 14:24:49 - props = Array
(
)

[Debug]:	2024-06-18 14:24:49 - fileToInclude = C:\laragon\www\myhub\pages\admin\settings\_partials/cities.css
[Debug]:	2024-06-18 14:24:49 - attrsStr = 
[Debug]:	2024-06-18 14:24:49 - inclFileRef = _partials/cities.js
[Debug]:	2024-06-18 14:24:49 - props = Array
(
)

[Debug]:	2024-06-18 14:24:49 - fileToInclude = C:\laragon\www\myhub\pages\admin\settings\_partials/cities.js


2024-06-18 14:24:50 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:50 - AJAX GET /admin/settings?back=dashboard
[Request]:	2024-06-18 14:24:50 - File: C:\laragon\www\myhub\pages\admin\settings\settings.php
[Request]:	2024-06-18 14:24:50 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:50 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:50 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:50 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:50 - db::query()
[Debug]:	2024-06-18 14:24:50 - db::buildQuery()
[Debug]:	2024-06-18 14:24:50 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:52 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:52 - AJAX GET /admin/settings?view=roles&back=settings
[Request]:	2024-06-18 14:24:52 - File: C:\laragon\www\myhub\pages\admin\settings\settings.php
[Request]:	2024-06-18 14:24:52 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:52 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:52 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:52 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:52 - db::query()
[Debug]:	2024-06-18 14:24:52 - db::buildQuery()
[Debug]:	2024-06-18 14:24:52 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:52 - db::query()
[Debug]:	2024-06-18 14:24:52 - db::buildQuery()
[Debug]:	2024-06-18 14:24:52 - db::query(), Array
(
    [0] => SELECT * FROM sys_roles ORDER BY name
    [1] => []
)



2024-06-18 14:24:54 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:54 - AJAX GET /admin/settings?back=dashboard
[Request]:	2024-06-18 14:24:54 - File: C:\laragon\www\myhub\pages\admin\settings\settings.php
[Request]:	2024-06-18 14:24:54 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:54 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:54 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:54 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:54 - db::query()
[Debug]:	2024-06-18 14:24:54 - db::buildQuery()
[Debug]:	2024-06-18 14:24:54 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:55 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:55 - AJAX GET /admin/dashboard
[Request]:	2024-06-18 14:24:55 - File: C:\laragon\www\myhub\pages\admin\dashboard\dashboard.php
[Request]:	2024-06-18 14:24:55 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:55 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:55 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:55 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:55 - db::query()
[Debug]:	2024-06-18 14:24:55 - db::buildQuery()
[Debug]:	2024-06-18 14:24:55 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)




2024-06-18 14:24:56 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:56 - AJAX GET /admin/clients?back=dashboard
[Request]:	2024-06-18 14:24:56 - File: C:\laragon\www\myhub\pages\admin\clients\clients.php
[Request]:	2024-06-18 14:24:56 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:56 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:56 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:56 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:56 - db::query()
[Debug]:	2024-06-18 14:24:56 - db::buildQuery()
[Debug]:	2024-06-18 14:24:56 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:56 - db::query()
[Debug]:	2024-06-18 14:24:56 - db::buildQuery()
[Debug]:	2024-06-18 14:24:56 - db::query(), Array
(
    [0] => SELECT * FROM user_settings WHERE user_id = ? ORDER BY setting_key
    [1] => [1]
)

[Debug]:	2024-06-18 14:24:56 - db::query()
[Debug]:	2024-06-18 14:24:56 - db::buildQuery()
[Debug]:	2024-06-18 14:24:56 - db::query(), Array
(
    [0] => SELECT u.id, u.user_id, u.username, u.first_name, u.last_name, u.email, r.name as role, r.home FROM users as u LEFT JOIN sys_roles as r on (u.role_id = r.id) WHERE r.name = ? ORDER BY u.first_name, u.last_name
    [1] => ["accountant"]
)

[Debug]:	2024-06-18 14:24:56 - users: Array
(
    [0] => stdClass Object
        (
            [id] => 2
            [user_id] => _acntnt_
            [username] => Accountant
            [first_name] => CH
            [last_name] => System
            [email] => accountant@currencyhub.co.za
            [role] => accountant
            [home] => accountant/dashboard
        )

)

[Debug]:	2024-06-18 14:24:56 - db::query()
[Debug]:	2024-06-18 14:24:56 - db::buildQuery()
[Debug]:	2024-06-18 14:24:56 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE deleted_at IS ? AND status = ? ORDER BY name asc
    [1] => [null,"Active"]
)



2024-06-18 14:24:58 - *** AJAX PAGE REQUEST *** 
[Request]:	2024-06-18 14:24:58 - AJAX GET /admin/clients?view=edit&id=new
[Request]:	2024-06-18 14:24:58 - File: C:\laragon\www\myhub\pages\admin\clients\clients.php
[Request]:	2024-06-18 14:24:58 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:24:58 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:24:58 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:24:58 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:24:58 - getClientById(), id = new
[Debug]:	2024-06-18 14:24:58 - createNewClient(), client: stdClass Object
(
    [id] => 
    [client_id] => 83a07a82
    [spouse_id] => 
    [name] => 
    [first_name] => 
    [middle_name] => 
    [last_name] => 
    [personal_email] => 
    [ncr] => 
    [bank] => 
    [accountant] => 
    [status] => 
    [trader_id] => chmarkts
    [trading_capital] => 
    [sda_mandate] => 
    [fia_mandate] => 
    [fia_approved] => 
    [sda_used] => 
    [fia_used] => 
    [referrer_id] => 
    [inhouse_referrer_15_percent] => 
    [third_party_referrer] => 
    [third_party_profit_percent] => 
    [fx_intermediary] => 
    [address] => 
    [suburb] => 
    [city] => 
    [province] => 
    [country] => 
    [postal_code] => 
    [ovex_email] => 
    [mercantile_name] => 
    [bp_number] => 
    [cif_number] => 
    [fia_pending] => 
    [fia_declined] => 
    [ovex_ref] => 
    [capitec_id] => 
    [id_number] => 
    [tax_number] => 
    [phone_number] => 
    [spare_1] => 
    [spare_2] => 
    [spare_3] => 
    [spare_4] => 
    [spare_5] => 
    [next_years_sda_mandate] => 
    [next_years_fia_mandate] => 
    [last_years_statement] => 
    [statement_file] => 
    [statement_pdf] => 
    [last_action] => 
    [action_at] => 
    [action_by] => 
    [updated_at] => 
    [updated_by] => 
    [created_at] => 
    [created_by] => 
    [settings] => 
    [notes] => 
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 
    [sync_by] => 
    [sync_from] => 
    [sync_type] => 
)

[Debug]:	2024-06-18 14:24:58 - Editing client: stdClass Object
(
    [id] => 
    [client_id] => 83a07a82
    [spouse_id] => 
    [name] => 
    [first_name] => 
    [middle_name] => 
    [last_name] => 
    [personal_email] => 
    [ncr] => 
    [bank] => 
    [accountant] => 
    [status] => 
    [trader_id] => chmarkts
    [trading_capital] => 
    [sda_mandate] => 
    [fia_mandate] => 
    [fia_approved] => 
    [sda_used] => 
    [fia_used] => 
    [referrer_id] => 
    [inhouse_referrer_15_percent] => 
    [third_party_referrer] => 
    [third_party_profit_percent] => 
    [fx_intermediary] => 
    [address] => 
    [suburb] => 
    [city] => 
    [province] => 
    [country] => 
    [postal_code] => 
    [ovex_email] => 
    [mercantile_name] => 
    [bp_number] => 
    [cif_number] => 
    [fia_pending] => 
    [fia_declined] => 
    [ovex_ref] => 
    [capitec_id] => 
    [id_number] => 
    [tax_number] => 
    [phone_number] => 
    [spare_1] => 
    [spare_2] => 
    [spare_3] => 
    [spare_4] => 
    [spare_5] => 
    [next_years_sda_mandate] => 
    [next_years_fia_mandate] => 
    [last_years_statement] => 
    [statement_file] => 
    [statement_pdf] => 
    [last_action] => 
    [action_at] => 
    [action_by] => 
    [updated_at] => 
    [updated_by] => 
    [created_at] => 
    [created_by] => 
    [settings] => 
    [notes] => 
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 
    [sync_by] => 
    [sync_from] => 
    [sync_type] => 
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE deleted_at IS ? AND id != ? ORDER BY name asc
    [1] => [null,"new"]
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM banks ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM loc_cities ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM loc_suburbs ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM loc_provinces ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM loc_countries ORDER BY name
    [1] => []
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT u.id, u.user_id, u.username, u.first_name, u.last_name, u.email, r.name as role, r.home FROM users as u LEFT JOIN sys_roles as r on (u.role_id = r.id) WHERE r.name = ? ORDER BY u.first_name, u.last_name
    [1] => ["accountant"]
)

[Debug]:	2024-06-18 14:24:58 - users: Array
(
    [0] => stdClass Object
        (
            [id] => 2
            [user_id] => _acntnt_
            [username] => Accountant
            [first_name] => CH
            [last_name] => System
            [email] => accountant@currencyhub.co.za
            [role] => accountant
            [home] => accountant/dashboard
        )

)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM ch_referrers WHERE deleted_at IS ?
    [1] => [null]
)

[Debug]:	2024-06-18 14:24:58 - db::query()
[Debug]:	2024-06-18 14:24:58 - db::buildQuery()
[Debug]:	2024-06-18 14:24:58 - db::query(), Array
(
    [0] => SELECT * FROM ch_ncrs ORDER BY name
    [1] => []
)



2024-06-18 14:25:28 - *** AJAX REQUEST *** 
[Request]:	2024-06-18 14:25:28 - AJAX POST /admin/clients?view=edit&id=new
[Request]:	2024-06-18 14:25:28 - File: C:\laragon\www\myhub\pages\admin\clients\clients.php
[Request]:	2024-06-18 14:25:28 - Session ID: 68up7asv35bk1jve5cl1iaurm9
[App Security]:	2024-06-18 14:25:28 - Allowed Role/Group: "admin"
[Security]:	2024-06-18 14:25:28 - Security::denyIfRoleNot(), allowed roles: ["admin","super-admin","sysadmin"]
[Security]:	2024-06-18 14:25:28 - Security::denyIfRoleNot(), auth user's role: "sysadmin"
[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM users WHERE id = ? LIMIT 1
    [1] => [1]
)


[Debug]:	2024-06-18 14:25:28 - IS POST Request - POST: Array
(
    [id] => 
    [client_id] => Natus exercitationem
    [status] => Active
    [first_name] => Shellie
    [middle_name] => Hedwig Roman
    [last_name] => Wallace
    [name] => Barrett
    [personal_email] => kufezixuhy@mailinator.com
    [spouse_id] => 
    [ncr] => 
    [referrer_id] => 
    [phone_number] => 27819021221
    [id_number] => 167
    [accountant] => CH System
    [tax_number] => 22
    [bank] => TEST
    [cif_number] => 62
    [bp_number] => 982
    [capitec_id] => Culpa repellendus C
    [mercantile_name] => Cullen Jimenez
    [address] => Temporibus quia ut n
    [suburb] => TEST
    [city] => TEST
    [province] => TEST
    [country] => TEST
    [postal_code] => 0982
    [trading_capital] => R 
    [sda_mandate] => R 301 994
    [fia_mandate] => R 011 998
    [next_years_sda_mandate] => R 2 012
    [next_years_fia_mandate] => R 1 996
    [spare_1] => 
    [spare_2] => 
    [notes] => Natus rerum do exerc
    [action] => saveClient
)

[Debug]:	2024-06-18 14:25:28 - IS POST Request - FILES: Array
(
    [spare_1_file] => Array
        (
            [name] => 
            [full_path] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

    [spare_2_file] => Array
        (
            [name] => 
            [full_path] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

)

[Debug]:	2024-06-18 14:25:28 - IS POST Request - User: stdClass Object
(
    [id] => 1
    [user_id] => _sysadm_
    [role_id] => 1
    [username] => Sysadmin
    [password] => ***
    [first_name] => CH
    [last_name] => Cron
    [email] => sysadmin@currencyhub.co.za
    [verification_token] => 
    [status] => active
    [home] => admin/dashboard
    [failed_login_attempts] => 0
    [failed_logins] => 3
    [created_at] => 0000-00-00 00:00:00
    [created_by] => neelsdev
    [updated_at] => 
    [updated_by] => 
    [last_login_at] => 2024-06-18 14:24:10
    [last_activity_at] => 
    [role] => sysadmin
)

[Debug]:	2024-06-18 14:25:28 - IS POST Request - Action: saveClient
[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE id_number = ? LIMIT 1
    [1] => ["167"]
)

[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE client_id = ? LIMIT 1
    [1] => ["Natus exercitationem"]
)

[Debug]:	2024-06-18 14:25:28 - getClientById(), id = new
[Debug]:	2024-06-18 14:25:28 - createNewClient(), client: stdClass Object
(
    [id] => 
    [client_id] => 8580a5ad
    [spouse_id] => 
    [name] => 
    [first_name] => 
    [middle_name] => 
    [last_name] => 
    [personal_email] => 
    [ncr] => 
    [bank] => 
    [accountant] => 
    [status] => 
    [trader_id] => chmarkts
    [trading_capital] => 
    [sda_mandate] => 
    [fia_mandate] => 
    [fia_approved] => 
    [sda_used] => 
    [fia_used] => 
    [referrer_id] => 
    [inhouse_referrer_15_percent] => 
    [third_party_referrer] => 
    [third_party_profit_percent] => 
    [fx_intermediary] => 
    [address] => 
    [suburb] => 
    [city] => 
    [province] => 
    [country] => 
    [postal_code] => 
    [ovex_email] => 
    [mercantile_name] => 
    [bp_number] => 
    [cif_number] => 
    [fia_pending] => 
    [fia_declined] => 
    [ovex_ref] => 
    [capitec_id] => 
    [id_number] => 
    [tax_number] => 
    [phone_number] => 
    [spare_1] => 
    [spare_2] => 
    [spare_3] => 
    [spare_4] => 
    [spare_5] => 
    [next_years_sda_mandate] => 
    [next_years_fia_mandate] => 
    [last_years_statement] => 
    [statement_file] => 
    [statement_pdf] => 
    [last_action] => 
    [action_at] => 
    [action_by] => 
    [updated_at] => 
    [updated_by] => 
    [created_at] => 
    [created_by] => 
    [settings] => 
    [notes] => 
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 
    [sync_by] => 
    [sync_from] => 
    [sync_type] => 
)

[Debug]:	2024-06-18 14:25:28 - clientBefore = stdClass Object
(
    [id] => 
    [client_id] => 8580a5ad
    [spouse_id] => 
    [name] => 
    [first_name] => 
    [middle_name] => 
    [last_name] => 
    [personal_email] => 
    [ncr] => 
    [bank] => 
    [accountant] => 
    [status] => 
    [trader_id] => chmarkts
    [trading_capital] => 
    [sda_mandate] => 
    [fia_mandate] => 
    [fia_approved] => 
    [sda_used] => 
    [fia_used] => 
    [referrer_id] => 
    [inhouse_referrer_15_percent] => 
    [third_party_referrer] => 
    [third_party_profit_percent] => 
    [fx_intermediary] => 
    [address] => 
    [suburb] => 
    [city] => 
    [province] => 
    [country] => 
    [postal_code] => 
    [ovex_email] => 
    [mercantile_name] => 
    [bp_number] => 
    [cif_number] => 
    [fia_pending] => 
    [fia_declined] => 
    [ovex_ref] => 
    [capitec_id] => 
    [id_number] => 
    [tax_number] => 
    [phone_number] => 
    [spare_1] => 
    [spare_2] => 
    [spare_3] => 
    [spare_4] => 
    [spare_5] => 
    [next_years_sda_mandate] => 
    [next_years_fia_mandate] => 
    [last_years_statement] => 
    [statement_file] => 
    [statement_pdf] => 
    [last_action] => 
    [action_at] => 
    [action_by] => 
    [updated_at] => 
    [updated_by] => 
    [created_at] => 
    [created_by] => 
    [settings] => 
    [notes] => 
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 
    [sync_by] => 
    [sync_from] => 
    [sync_type] => 
)

[Debug]:	2024-06-18 14:25:28 - db::save() Array
(
    [autoStamp] => 1
    [user] => _sysadm_
)

[Debug]:	2024-06-18 14:25:28 - db::insert(), data: Array
(
    [id] => 
    [client_id] => Natus exercitationem
    [status] => Active
    [first_name] => Shellie
    [middle_name] => Hedwig Roman
    [last_name] => Wallace
    [name] => Barrett
    [personal_email] => kufezixuhy@mailinator.com
    [spouse_id] => 
    [ncr] => 
    [referrer_id] => 
    [phone_number] => 27819021221
    [id_number] => 167
    [accountant] => CH System
    [tax_number] => 22
    [bank] => TEST
    [cif_number] => 62
    [bp_number] => 982
    [capitec_id] => Culpa repellendus C
    [mercantile_name] => Cullen Jimenez
    [address] => Temporibus quia ut n
    [suburb] => TEST
    [city] => TEST
    [province] => TEST
    [country] => TEST
    [postal_code] => 0982
    [trading_capital] => R 
    [sda_mandate] => R 301 994
    [fia_mandate] => R 011 998
    [next_years_sda_mandate] => R 2 012
    [next_years_fia_mandate] => R 1 996
    [spare_1] => 
    [spare_2] => 
    [notes] => Natus rerum do exerc
    [action] => saveClient
    [sync_at] => 2024-06-18 14:25:28
    [sync_by] => _sysadm_
    [sync_from] => local
    [sync_type] => new
)

[Debug]:	2024-06-18 14:25:28 - db::autoStamp(), created_at: 2024-06-18 14:25:28
[Debug]:	2024-06-18 14:25:28 - db::autoStamp(), created_by: _sysadm_
[Debug]:	2024-06-18 14:25:28 - db::execute()
[Debug]:	2024-06-18 14:25:28 - db::execute(), Array
(
    [0] => INSERT INTO `clients` ( client_id, status, first_name, middle_name, last_name, name, personal_email, spouse_id, ncr, referrer_id, phone_number, id_number, accountant, tax_number, bank, cif_number, bp_number, capitec_id, mercantile_name, address, suburb, city, province, country, postal_code, trading_capital, sda_mandate, fia_mandate, next_years_sda_mandate, next_years_fia_mandate, spare_1, spare_2, notes, sync_at, sync_by, sync_from, sync_type, created_at, created_by ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
    [1] => ["Natus exercitationem","Active","Shellie","Hedwig Roman","Wallace","Barrett","kufezixuhy@mailinator.com",null,null,null,"27819021221","167","CH System","22","TEST","62","982","Culpa repellendus C","Cullen Jimenez","Temporibus quia ut n","TEST","TEST","TEST","TEST","0982",0,301994,11998,2012,1996,null,null,"Natus rerum do exerc","2024-06-18 14:25:28","_sysadm_","local","new","2024-06-18 14:25:28","_sysadm_"]
)

[Debug]:	2024-06-18 14:25:28 - Save client result: Array
(
    [status] => inserted
    [id] => 7
    [affected] => 1
)

[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM clients WHERE id = ? LIMIT 1
    [1] => ["7"]
)

[Debug]:	2024-06-18 14:25:28 - Saved client = stdClass Object
(
    [id] => 7
    [client_id] => Natus exercitationem
    [spouse_id] => 
    [name] => Barrett
    [first_name] => Shellie
    [middle_name] => Hedwig Roman
    [last_name] => Wallace
    [personal_email] => kufezixuhy@mailinator.com
    [ncr] => 
    [bank] => TEST
    [accountant] => CH System
    [status] => Active
    [trader_id] => 
    [trading_capital] => 0
    [sda_mandate] => 301994
    [fia_mandate] => 11998
    [fia_approved] => 
    [sda_used] => 
    [fia_used] => 
    [referrer_id] => 
    [inhouse_referrer_15_percent] => 
    [third_party_referrer] => 
    [third_party_profit_percent] => 
    [fx_intermediary] => 
    [address] => Temporibus quia ut n
    [suburb] => TEST
    [city] => TEST
    [province] => TEST
    [country] => TEST
    [postal_code] => 0982
    [ovex_email] => 
    [mercantile_name] => Cullen Jimenez
    [bp_number] => 982
    [cif_number] => 62
    [fia_pending] => 
    [fia_declined] => 
    [ovex_ref] => 
    [capitec_id] => Culpa repellendus C
    [id_number] => 167
    [tax_number] => 22
    [phone_number] => 27819021221
    [spare_1] => 
    [spare_2] => 
    [spare_3] => 
    [spare_4] => 
    [spare_5] => 
    [next_years_sda_mandate] => 2012
    [next_years_fia_mandate] => 1996
    [last_years_statement] => 
    [statement_file] => 
    [statement_pdf] => 
    [last_action] => 
    [action_at] => 
    [action_by] => 
    [updated_at] => 
    [updated_by] => 
    [created_at] => 2024-06-18 14:25:28
    [created_by] => _sysadm_
    [settings] => 
    [notes] => Natus rerum do exerc
    [deleted_at] => 
    [deleted_by] => 
    [sync_at] => 2024-06-18 14:25:28
    [sync_by] => _sysadm_
    [sync_from] => local
    [sync_type] => new
)

[Debug]:	2024-06-18 14:25:28 - ClientState::__construct()

[Debug]:	2024-06-18 14:25:28 - ClientState::updateStateFor(), options = Array
(
)

[Debug]:	2024-06-18 14:25:28 - ClientStatement::generate(), options = Array
(
    [year] => 2024
)


[Debug]:	2024-06-18 14:25:28 - getClientTrades(), type = All
[Debug]:	2024-06-18 14:25:28 - Year: 2024
[Debug]:	2024-06-18 14:25:28 - From Date: 2024-01-01
[Debug]:	2024-06-18 14:25:28 - To Date: 2024-12-31
[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM trades WHERE deleted_at IS NULL AND client_id = ? AND `date` BETWEEN ? AND ? ORDER BY `date`, created_at
    [1] => ["Natus exercitationem","2024-01-01","2024-12-31"]
)


[Debug]:	2024-06-18 14:25:28 - Client::getAnnualInfo(), year = 2024
[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM clients_annual_info WHERE client_id = ? AND year = ? LIMIT 1
    [1] => [7,"2024"]
)

[Debug]:	2024-06-18 14:25:28 - ClientStatement::generate(), annualInfo = stdClass Object
(
    [year] => 2024
    [client_id] => 7
    [trading_capital] => 0
    [fia_mandate] => 11998
    [sda_mandate] => 301994
)

[Debug]:	2024-06-18 14:25:28 - Fee::getChFee(), date = 2024-01-01
[Debug]:	2024-06-18 14:25:28 - db::query()
[Debug]:	2024-06-18 14:25:28 - db::buildQuery()
[Debug]:	2024-06-18 14:25:28 - db::query(), Array
(
    [0] => SELECT * FROM fees WHERE fee_type_id = ? AND start_date <= ? AND (end_date IS ? OR end_date >= ?) LIMIT 1
    [1] => [1,"2024-01-01",null,"2024-01-01"]
)

[Error]:	2024-06-18 14:25:28 - Fee::getChFee(), CH Fee not found for date 2024-01-01
[Debug]:	2024-06-18 14:25:28 - abort_uploads(), caller: exception
[Debug]:	2024-06-18 14:25:28 - abort_uploads(), files: Array
(
    [spare_1_file] => Array
        (
            [name] => 
            [full_path] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

    [spare_2_file] => Array
        (
            [name] => 
            [full_path] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

)

