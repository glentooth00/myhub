<include>_partials/trades.css</include>
<div class="container h100">
  <div class="flex-row flex-gap h100">
    <div id="trades" class="flex-col flex-gap flex-3 h100 py1">
      <header><h2>Trades</h2></header>
      <fieldset class="scrollbox h100">
        <form id="tradesForm">
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" onchange="F1.app.toggleSelectAll(event)"></th>
                  <th>Row</th>
                  <th>Trade ID</th>
                  <th>Client</th>
                  <th>Type</th>
                  <th>Date</th>
                  <th>ZAR Sent</th>
                  <th>USD Bought</th>
                  <th>Forex Rate</th>
                  <th>ZAR Profit</th>
                  <th>% Return</th>
                  <th>Covered</th>
                  <th>Allocated Pins</th>
                </tr>
              </thead>
              <tbody>
                <template id="trade-row-template">
                  <tr data-id="{trade.id}">
                    <td><input type="checkbox" name="selected[]" value="{trade.id}"></td>
                    <td>{index}</td>
                    <td>{trade.trade_id}</td>
                    <td>{trade.client_name}</td>
                    <td>{trade.sda_fia}</td>
                    <td>{trade.date}</td>
                    <td>{trade.zar_sent}</td>
                    <td>{trade.usd_bought}</td>
                    <td>{trade.forex_rate}</td>
                    <td>{trade.zar_profit}</td>
                    <td>{trade.percent_return}</td>
                    <td>{trade.amount_covered}</td>
                    <td>{trade.allocated_pins}</td>
                  </tr>
                </template>                
                <tr><td colspan="12">No Results</td></tr>
              </tbody>
            </table>
          </div>
        </form>
      </fieldset>
    </div> <!-- tradesToUpdate -->
    
    <div id="results" class="flex-col flex-gap flex-1 h100 py1">
      <header class="flex-row space-between">
        <div class="flex-col"><h2>Results</h2></div>
        <div class="flex-col">
          <button class="btn-sm text-primary" type="button" data-tippy-content="Export to CSV" 
            onclick="F1.app.exportToCsv('resultsTable')">
            <i class="fa fa-download"></i>&nbsp;
          </button>
        </div>
      </header>
      <fieldset class="scrollbox h100">
        <div class="table-responsive">
          <table>
            <thead>
              <tr>
                <th>Result</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="2">No Results</td></tr>
            </tbody>
          </table>
        </div>
      </fieldset>
    </div> <!-- results -->

    <aside class="flex-col flex-gap flex-1 h100 py1">
      <section class="flex-col flex-gap">
        <header>
          <h2>Trades Source</h2>
        </header>
        <div class="flex-col flex-gap">
          <textarea id="uids" name="uids" cols="30" rows="7" placeholder="SQL Statement or Trade UIDs List"></textarea>
          <button class="btn btn-primary" onclick="F1.app.fetchTrades(event)">Fetch Trades</button>
        </div>
      </section>
      <hr>
      <section class="flex-col flex-gap">
        <header>
          <h2>Selection</h2>
        </header>
        <label class="flex-row flex-gap-sm align-center">
          <input id="unselectExisting" type="checkbox" checked>
          Unselect Existing
        </label>
        <label class="flex-row flex-gap-sm align-center">
          <input id="hideUnselected" type="checkbox" onchange="F1.app.toggleUnselectedVisiblity(event)">
          Hide Unselected
        </label>
      </section>
      <hr>
      <section class="flex-col flex-gap">
        <header>
          <h2>Actions</h2>
        </header>
        <button class="btn btn-primary" onclick="F1.app.fixR500Issue()">
          <i class="fa fa-wrench"></i>&nbsp;&nbsp;Fix R500 Error</button>
      </section>
    </aside>
  </div> <!-- flex-row -->
</div> <!-- container -->
<script src="vendors/F1/js/csv.js"></script>
<include>_partials/trades.js</include>